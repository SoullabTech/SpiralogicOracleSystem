# üìú Copilot Prompts: Spiralogic Oracle System

## ‚ö° Context Primer

Paste this first into Copilot Chat to set the stage:

```plaintext
You are my GitHub Copilot Chat assistant for the Spiralogic Oracle System.  

Context:
- Monorepo with pnpm workspaces
- apps/web ‚Üí Next.js frontend (deploys to Vercel)
- apps/api ‚Üí backend service (future: Railway/Render)
- packages/shared ‚Üí types, schemas, utils
- Deployments use vercel CLI from apps/web
- Preview first, then production
- Stub API mode is active for safe demos

Your job:
- Help me deploy apps/web with vercel CLI
- Debug Vercel build logs
- Check pnpm workspace setup
- Always give explicit commands I can run in the terminal
```

---

## üöÄ Deploy Commands

### Preview Deploy
```plaintext
How do I deploy apps/web to a Vercel preview environment?  
Command:
cd apps/web && vercel --previews --archive=tgz --yes && cd ../..
```

### Production Deploy
```plaintext
How do I deploy apps/web to Vercel production?  
Command:
cd apps/web && vercel --prod --archive=tgz --yes && cd ../..
```

### Redeploy (Preview or Prod)
```plaintext
How do I redeploy apps/web to the same preview or production environment?  
Command:
cd apps/web && vercel deploy --archive=tgz --yes && cd ../..
```

---

## üîç Debug & Troubleshoot

### Debug Build Logs
```plaintext
Check the last 50 lines of vercel-deploy.log and explain the errors in plain English.
```

### Check Monorepo Setup
```plaintext
Does pnpm-workspace.yaml correctly include apps/web, apps/api, and packages/shared?  
If not, give me the corrected yaml.
```

---

## üõ† DevOps Power Prompts

### CI/CD Automation
```plaintext
Generate a GitHub Actions workflow for:
- Linting on PRs
- Building apps/web and apps/api
- Running tests
- Deploy preview on PR, production on main branch merge
```

### Error Triage
```plaintext
Analyze the last 100 lines of vercel-deploy.log and give me:
1. Root cause of the build failure
2. Exact fix commands to run
3. Prevention steps for the future
```

### Testing Coverage
```plaintext
Generate Jest unit tests for lib/api/client.ts covering:
- Stub API mode toggle
- Real API connection
- Error handling scenarios
```

### Security Audit
```plaintext
Scan the repo for:
- Exposed secrets or API keys
- Missing environment variables in apps/web
- Vulnerable dependencies
- Suggest fixes for each issue found
```

### Performance Optimization
```plaintext
Analyze my Next.js bundle size and suggest:
- Components to lazy load
- Packages to remove or replace
- Code splitting opportunities
- Image optimization strategies
```

### Database Migrations
```plaintext
Generate a Supabase migration for:
- Adding new table/column
- Updating indexes
- Safe rollback strategy
```

### Monitoring Setup
```plaintext
Set up error tracking with:
- Sentry integration for apps/web
- Performance metrics collection
- Custom error boundaries
- Alert configuration
```

---

## üìã Quick Fix Templates

### Fix TypeScript Errors
```plaintext
Find all TypeScript errors in the workspace and provide:
- List of errors by file
- Exact fixes for each error
- Commands to auto-fix where possible
```

### Fix Lint Issues
```plaintext
Run ESLint across the monorepo and:
- Auto-fix what's possible
- List manual fixes needed
- Update ESLint config if needed
```

### Fix Build Failures
```plaintext
The build is failing with [paste error]. 
Provide:
1. Why this happens
2. Step-by-step fix
3. Verification commands
```

---

## üéØ Pro Tips

* **Deploy Flow**: Preview ‚Üí Test ‚Üí Production
* **If Vercel fails**: Check `vercel-deploy.log` and paste errors here
* **After migrations**: Run `pnpm install` at root
* **Production URL**: `https://spiralogic-oracle-system.vercel.app`
* **Emergency deploy**: Use `./emergency-deploy.sh` for quick prod push
* **Stub mode**: API_MODE=stub for safe demos

---

## üîó Quick Commands Reference

```bash
# Install dependencies
pnpm install

# Run dev servers
pnpm dev          # All workspaces
pnpm dev:web      # Frontend only
pnpm dev:api      # Backend only

# Build
pnpm build        # All workspaces
pnpm build:web    # Frontend only

# Test
pnpm test         # All tests
pnpm test:web     # Frontend tests

# Deploy
./preview-deploy.sh    # Preview environment
./emergency-deploy.sh  # Production (careful!)

# Logs
tail -f vercel-deploy.log  # Watch deploy logs
```

---

‚úÖ **You now have AI-powered DevOps at your fingertips!**

Both `.claude-prompts.md` and `.copilot-prompts.md` turn your AI assistants into full-stack deployment teammates.