/**
 * Daimonic Dashboard Metaphor Library
 * Complete library of phenomenological phrases and metaphors
 * Never diagnostic, always weather-like and imaginal
 */

export class DaimonicDashboardMetaphors {
  
  /**
   * Field Status Banner Metaphors
   */
  static fieldStatusMetaphors = {
    calm: {
      primary: [
        "The air is unusually clear.",
        "The field feels calm and steady, like a quiet morning.",
        "Peaceful currents flowing through the collective space.",
        "The archetypal weather is mild and approachable today.",
        "A contemplative stillness moves through the shared depths.",
        "The collective waters are smooth and reflective."
      ],
      secondary: [
        "A time of gentle stirring in the shared depths.",
        "The field rests in preparatory quiet.",
        "Beneath the surface, deeper currents are organizing.",
        "The commons hold space for individual processing."
      ]
    },
    
    charged: {
      primary: [
        "The air is charged with potential—something is stirring in the collective.",
        "Electric undercurrents moving through the shared field.",
        "The field hums with anticipation and possibility.",
        "Something is gathering momentum in the archetypal depths.",
        "The collective space feels pregnant with emergence.",
        "Archetypal energies are building toward expression."
      ],
      secondary: [
        "The atmosphere carries the tension of impending breakthrough.",
        "Multiple currents are converging in the shared space.",
        "The field holds both excitement and uncertainty.",
        "Something wants to be born through the collective."
      ]
    },
    
    clear: {
      primary: [
        "The air is unusually clear.",
        "The field is luminous and clear—shared insights are flowing freely.",
        "Crystal clarity in the collective transmission channels.",
        "The archetypal weather is bright and transparent.",
        "A rare window of unobstructed collective understanding.",
        "The commons are bathed in unusual clarity."
      ],
      secondary: [
        "Wisdom moves through the field without distortion.",
        "The usual static has cleared from the channels.",
        "Truth can be heard clearly in the shared space.",
        "The collective mirror reflects without clouding."
      ]
    },
    
    stormy: {
      primary: [
        "Storms are passing through the collective field.",
        "The field feels stormy, with teaching riddles moving through like weather fronts.",
        "Turbulent energies carrying important lessons through the collective.",
        "The archetypal weather is intense—wisdom wrapped in confusion.",
        "Storm systems of transformation crossing the shared space.",
        "Lightning and thunder in the collective atmosphere."
      ],
      secondary: [
        "The field churns with powerful but complex teachings.",
        "Wisdom arrives sideways through the storm systems.",
        "The tempest carries what can't be learned gently.",
        "In the eye of the storm, unexpected clarity waits."
      ]
    }
  };

  /**
   * Archetypal Pattern Metaphors
   */
  static archetypeMetaphors = {
    Transformation: {
      water: [
        "Deep waters of change are moving through the collective.",
        "The Transformation archetype flows like a river changing course.",
        "Dissolution and renewal currents are particularly strong.",
        "The field carries themes of letting go and allowing flow."
      ],
      fire: [
        "Transformational fire burns through the collective patterns.",
        "The Phoenix energy is active—burning away the old to birth the new.",
        "Purifying flames move through the shared archetypal space."
      ],
      general: [
        "The Transformation archetype is moving through the collective.",
        "Deep change is constellating across multiple participants.",
        "Metamorphosis energy is particularly active right now."
      ]
    },
    
    Initiation: {
      fire: [
        "Initiation fire blazes through the collective field.",
        "The courage to begin burns bright in the shared space.",
        "Threshold-crossing energy ignites across participants."
      ],
      earth: [
        "Grounded initiation energy builds slowly in the collective.",
        "The field supports patient beginnings and solid foundations.",
        "Earth-based initiation emphasizes embodied first steps."
      ],
      general: [
        "Initiation energy is flowing through the shared space.",
        "The field carries themes of breakthrough and courage.",
        "Multiple participants are encountering threshold experiences."
      ]
    },
    
    Integration: {
      earth: [
        "Integration themes root deeply in the collective soil.",
        "The field emphasizes grounding and embodiment.",
        "Earth-wisdom guides the bringing together of scattered pieces."
      ],
      air: [
        "Integration happens through new perspective and understanding.",
        "The field weaves together insights from different altitudes.",
        "Air-based integration emphasizes mental clarity and connection."
      ],
      general: [
        "Integration themes are weaving through the collective.",
        "Multiple participants are working to bring insights into form.",
        "The field supports the marriage of inner and outer work."
      ]
    },
    
    Liberation: {
      air: [
        "Liberation winds blow through the collective consciousness.",
        "The field carries themes of freedom and expanded perspective.",
        "Air-currents of release move through the shared space."
      ],
      fire: [
        "Liberating fire burns away what constrains the collective.",
        "Freedom energy blazes through old limiting patterns.",
        "The field ignites with breakthrough and release."
      ],
      general: [
        "Liberation energy is moving through the shared field.",
        "Multiple participants are experiencing expanded perspective.",
        "The field supports breaking free from old constraints."
      ]
    },
    
    Unity: {
      aether: [
        "Unity consciousness touches the collective space with ethereal presence.",
        "The field holds themes of wholeness beyond comprehension.",
        "Aether-energy weaves all separate threads into one cloth."
      ],
      water: [
        "Unity flows like an ocean that holds all separate waves.",
        "The field dissolves barriers between self and other.",
        "Water-unity emphasizes connection and flowing together."
      ],
      general: [
        "Unity consciousness is touching the collective space.",
        "The field holds themes of wholeness and recognition.",
        "Multiple participants are sensing deeper connections."
      ]
    }
  };

  /**
   * Field Intensity Metaphors
   */
  static intensityMetaphors = {
    low: [
      "The field whispers rather than shouts.",
      "Quiet conditions in the collective field—time for integration.",
      "Gentle archetypal weather with space for reflection.",
      "The shared field is restful and contemplative.",
      "The collective waters are still and deep.",
      "A time for individual processing and preparation."
    ],
    
    moderate: [
      "Balanced activity flowing through the collective field.",
      "The archetypal weather carries a comfortable charge for exploration.",
      "Moderate currents support both individual and group work.",
      "The field holds steady energy for sustained engagement.",
      "The collective pulse beats at a workable rhythm."
    ],
    
    high: [
      "The field is highly activated—strong currents moving through.",
      "Intense archetypal weather with significant collective activity.",
      "The shared space is electric with transformational energy.",
      "Peak conditions for collective breakthrough experiences.",
      "The field pulses with maximum intensity and possibility.",
      "Lightning-level activation in the archetypal commons."
    ],
    
    rising: [
      "The field is gathering momentum like a building storm.",
      "Energy is climbing toward a peak in the collective space.",
      "The archetypal pressure is increasing steadily."
    ],
    
    falling: [
      "The intensity is settling after a period of high activity.",
      "The field is moving toward integration and rest.",
      "The collective energy is finding its way back to ground."
    ],
    
    stable: [
      "The field maintains steady intensity across time.",
      "Consistent energy flows through the archetypal channels.",
      "The collective pulse holds at a sustainable level."
    ]
  };

  /**
   * Synchronistic Resonance Metaphors
   */
  static resonanceMetaphors = {
    formation: [
      "Synchronistic echoes are forming across the network.",
      "The field weaves connections through shared experience.",
      "Resonance patterns are crystallizing in the collective space.",
      "Archetypal themes are finding their siblings across participants."
    ],
    
    strength: {
      high: [
        "A strong resonance pulses through the shared field.",
        "The synchronistic connection has deep roots.",
        "This theme resonates with unusual power across participants."
      ],
      moderate: [
        "A steady resonance hums through the collective.",
        "This theme creates gentle but noticeable connections.",
        "The synchronistic pattern has moderate but consistent presence."
      ],
      emerging: [
        "A new resonance is beginning to form.",
        "This theme is finding its initial expression across participants.",
        "Early signs of synchronistic connection are appearing."
      ]
    },
    
    themes: {
      "slow down": [
        "The collective receives guidance to pause and breathe.",
        "Multiple lives are encountering the wisdom of deceleration.",
        "The field carries medicine for our speed-sick culture."
      ],
      "authority resistance": [
        "Questions about power and autonomy move through the field.",
        "The collective grapples with inherited authority patterns.",
        "Multiple participants are reclaiming their own authority."
      ],
      "creative expression": [
        "The urge to create stirs across the collective field.",
        "Artistic energy seeks expression through multiple lives.",
        "The field supports the birth of new creative works."
      ],
      "relational healing": [
        "Themes of connection and repair move through the collective.",
        "The field holds space for relationship transformation.",
        "Heart-medicine is moving through multiple encounters."
      ]
    },
    
    participation: [
      "This week's patterns echo across many lives. You are not alone.",
      "The theme finds expression through multiple participants.",
      "A shared teaching moves through individual encounters.",
      "The collective recognizes itself in this common experience."
    ]
  };

  /**
   * Transmission Quality Metaphors
   */
  static transmissionMetaphors = {
    clear: [
      "The signal is clean and easy to receive.",
      "Messages flow without distortion through the field.",
      "The collective channels are wide open and transparent.",
      "Communication moves freely between individual and shared awareness."
    ],
    
    riddles: [
      "Messages arrive wrapped in teaching riddles.",
      "The field speaks in koans and paradox today.",
      "Wisdom presents itself in puzzle form.",
      "The teachings come sideways, requiring patient attention.",
      "Truth arrives disguised as confusion."
    ],
    
    static: [
      "High activity creates some interference in the channels.",
      "The volume is up but clarity requires extra attention.",
      "Strong signals compete for space in the collective field.",
      "Filter carefully—both wisdom and noise are present."
    ],
    
    silence: [
      "The collective channels rest in contemplative quiet.",
      "A pause in the archetypal conversation allows integration.",
      "The field holds space rather than transmitting content.",
      "Silence carries its own form of communication."
    ]
  };

  /**
   * Seasonal/Lunar Metaphors
   */
  static cyclicalMetaphors = {
    correlations: [
      "Natural rhythms amplify archetypal themes.",
      "The moon and seasons dance with collective patterns.",
      "Cosmic cycles breathe through the shared field.",
      "The larger wheels of time influence our common experience."
    ],
    
    lunar: {
      new: [
        "New moon energy supports fresh beginnings in the collective.",
        "The dark moon creates space for seeding intentions.",
        "Initiative and visioning are favored under this lunar influence."
      ],
      waxing: [
        "Waxing moon energy builds momentum in collective patterns.",
        "The growing light supports expansion and development.",
        "Progress and forward movement are supported by lunar phase."
      ],
      full: [
        "Full moon intensity amplifies all collective patterns.",
        "The peaked lunar energy creates maximum archetypal activation.",
        "Heightened sensitivity and breakthrough are common now."
      ],
      waning: [
        "Waning moon supports release and integration.",
        "The decreasing light favors letting go and processing.",
        "Natural completion and resolution are encouraged."
      ]
    },
    
    seasonal: {
      spring: [
        "Spring energy brings renewal themes to the collective.",
        "The field greens with new growth and possibility.",
        "Emergence and fresh starts characterize this seasonal influence."
      ],
      summer: [
        "Summer intensity peaks in the collective field.",
        "Full expression and manifestation are supported.",
        "The field radiates maximum energy and activity."
      ],
      autumn: [
        "Autumn themes of harvest and preparation move through the field.",
        "The collective gathers wisdom from the year's experiences.",
        "Preparation and deepening characterize this seasonal shift."
      ],
      winter: [
        "Winter encourages introspection in the collective space.",
        "The field moves inward for rest and deep processing.",
        "Contemplation and inner work are naturally supported."
      ]
    }
  };

  /**
   * Network/Connection Metaphors
   */
  static networkMetaphors = [
    "Invisible threads connect participants across the archetypal web.",
    "The mycelial network of shared experience spreads beneath awareness.",
    "Synchronistic pathways weave between individual experiences.",
    "The collective field maps itself through meaningful connections.",
    "Archetypal themes find each other across the network of participants."
  ];

  /**
   * Grounding Practice Metaphors
   */
  static groundingMetaphors = {
    offerings: [
      "When the field energy runs high, simple practices restore balance:",
      "The field's intensity calls for grounding practices:",
      "Strong archetypal weather benefits from earthing activities:",
      "High collective charge can be balanced through:",
      "When overwhelmed by field energy, try:"
    ],
    
    practices: [
      "Take three conscious breaths and feel your feet on the ground",
      "Step outside and let the earth hold you for a moment", 
      "Share what you're experiencing with a trusted friend",
      "Drink a glass of water with full attention",
      "Write down one concrete thing you can do today",
      "Place your hands on your heart and breathe slowly",
      "Look out a window and notice the natural world",
      "Take a short walk without agenda or destination"
    ]
  };

  /**
   * Privacy/Safety Metaphors
   */
  static safetyMetaphors = [
    "All patterns are anonymized archetypal echoes, not individual data.",
    "You are seeing the weather, not the people who experience it.",
    "The field reveals collective themes while protecting individual privacy.",
    "These are archetypal shadows on the cave wall, not personal details.",
    "The dashboard shows the forest patterns, not the individual trees."
  ];

  /**
   * Error State Metaphors
   */
  static errorMetaphors = {
    noData: [
      "The field is resting—no significant patterns to report right now.",
      "Quiet period in the collective space—a time for individual reflection.",
      "The archetypal weather is unusually calm and still.",
      "The field holds space in silence today."
    ],
    
    loading: [
      "Attuning to the collective field...",
      "Listening to the archetypal currents...",
      "Reading the patterns in the shared space...",
      "Sensing the weather in the commons..."
    ],
    
    connection: [
      "Unable to sense the collective field right now—the connection wavers.",
      "The archetypal weather station is temporarily offline.",
      "Having trouble reading the field patterns—please try again shortly.",
      "The connection to the shared space is unclear at the moment."
    ]
  };

  /**
   * Get random metaphor from category
   */
  static getRandomMetaphor(category: string, subcategory?: string): string {
    const metaphors = subcategory 
      ? this.getNestedMetaphors(category, subcategory)
      : this.getDirectMetaphors(category);
    
    if (!metaphors || metaphors.length === 0) {
      return "The field holds its patterns in mysterious ways.";
    }
    
    return metaphors[Math.floor(Math.random() * metaphors.length)];
  }

  private static getDirectMetaphors(category: string): string[] {
    switch (category) {
      case 'network': return this.networkMetaphors;
      case 'safety': return this.safetyMetaphors;
      default: return [];
    }
  }

  private static getNestedMetaphors(category: string, subcategory: string): string[] {
    const categoryData = (this as any)[category + 'Metaphors'];
    if (!categoryData) return [];
    
    const subcategoryData = categoryData[subcategory];
    if (Array.isArray(subcategoryData)) return subcategoryData;
    if (subcategoryData?.primary) return [...subcategoryData.primary, ...subcategoryData.secondary];
    
    return [];
  }

  /**
   * Get contextual metaphor based on conditions
   */
  static getContextualMetaphor(
    category: string,
    intensity: number,
    condition: string = 'normal'
  ): string {
    if (category === 'fieldStatus') {
      if (condition === 'stormy' && intensity > 0.8) {
        return "The field churns with lightning—powerful teachings move through the storm.";
      } else if (condition === 'clear' && intensity > 0.7) {
        return "Rare clarity illuminates the collective space—truth moves freely.";
      } else if (intensity < 0.2) {
        return "The field whispers in contemplative stillness.";
      }
    }
    
    return this.getRandomMetaphor(category, condition);
  }

  /**
   * Generate themed metaphor sequence
   */
  static generateMetaphorSequence(theme: string, count: number = 3): string[] {
    const sequences: Record<string, string[]> = {
      weather: [
        "The archetypal weather shifts like any natural system.",
        "Pressure systems of meaning move through the collective atmosphere.",
        "The field has its seasons of storm and clarity.",
        "Participants experience the shared climate in individual ways."
      ],
      
      ecology: [
        "The collective field operates like a living ecosystem.",
        "Archetypal themes form the substrate where individual encounters grow.",
        "The health of the whole supports the flourishing of each part.",
        "What affects one participant ripples through the entire web."
      ],
      
      music: [
        "Individual encounters contribute notes to a collective symphony.",
        "The field resonates with harmonics beyond any single voice.",
        "Themes find their rhythm across multiple participants.",
        "The archetypal music plays through many instruments simultaneously."
      ]
    };

    const sequence = sequences[theme] || sequences.weather;
    return sequence.slice(0, Math.min(count, sequence.length));
  }

  /**
   * Validate metaphor appropriateness
   */
  static isMetaphorAppropriate(metaphor: string): boolean {
    const inappropriateTerms = [
      'diagnosis', 'pathology', 'disorder', 'dysfunction',
      'fix', 'cure', 'treatment', 'therapy',
      'analyze', 'assess', 'evaluate', 'measure',
      'optimize', 'improve', 'enhance', 'maximize',
      'data', 'metrics', 'statistics', 'algorithms'
    ];
    
    const lowerMetaphor = metaphor.toLowerCase();
    return !inappropriateTerms.some(term => lowerMetaphor.includes(term));
  }
}